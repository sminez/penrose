<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>UI - The Penrose Book</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="../builtin/index.html"><strong aria-hidden="true">2.</strong> Built In Functionality</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../builtin/layouts.html"><strong aria-hidden="true">2.1.</strong> Layouts</a></li><li class="chapter-item expanded "><a href="../builtin/actions.html"><strong aria-hidden="true">2.2.</strong> Actions</a></li><li class="chapter-item expanded "><a href="../builtin/ui.html" class="active"><strong aria-hidden="true">2.3.</strong> UI</a></li></ol></li><li class="chapter-item expanded "><a href="../extensions/index.html"><strong aria-hidden="true">3.</strong> Extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../extensions/hooks.html"><strong aria-hidden="true">3.1.</strong> Hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../extensions/startup-hooks.html"><strong aria-hidden="true">3.1.1.</strong> Startup Hooks</a></li><li class="chapter-item expanded "><a href="../extensions/event-hooks.html"><strong aria-hidden="true">3.1.2.</strong> Event Hooks</a></li><li class="chapter-item expanded "><a href="../extensions/manage-hooks.html"><strong aria-hidden="true">3.1.3.</strong> Manage Hooks</a></li><li class="chapter-item expanded "><a href="../extensions/refresh-hooks.html"><strong aria-hidden="true">3.1.4.</strong> Refresh Hooks</a></li></ol></li><li class="chapter-item expanded "><a href="../extensions/ewmh.html"><strong aria-hidden="true">3.2.</strong> EWMH</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../overview/index.html"><strong aria-hidden="true">4.</strong> Overview of Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../overview/pure-vs-x.html"><strong aria-hidden="true">4.1.</strong> Pure Code vs X Code</a></li><li class="chapter-item expanded "><a href="../overview/data-structures.html"><strong aria-hidden="true">4.2.</strong> Data Structures</a></li></ol></li><li class="chapter-item expanded "><a href="../building/index.html"><strong aria-hidden="true">5.</strong> Building on top of penrose</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building/actions.html"><strong aria-hidden="true">5.1.</strong> Actions</a></li><li class="chapter-item expanded "><a href="../building/layouts.html"><strong aria-hidden="true">5.2.</strong> Layouts</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.3.</strong> Hooks</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.4.</strong> State Extensions</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.5.</strong> Example: Named Scratchpads</div></li></ol></li><li class="chapter-item expanded "><a href="../faq.html">FAQs</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Penrose Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ui"><a class="header" href="#ui">UI</a></h1>
<p>Currently, penrose offers a single piece of built in UI via the <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/index.html">penrose_ui</a> crate:
a status bar. The bar is inspired by the <code>dwm</code> status bar and provides a simple API
for writing your own text based <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/trait.Widget.html">widgets</a> for rendering to the screen.</p>
<p>In addition to the widgets described below there are a couple of debugging based widgets
which are useful when trying to diagnose issues with the window manager state but probably
<em>not</em> something you want on your screen all the time. If you are interested in taking a
look at them they can be found <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/debug/index.html">here</a></p>
<h2 id="the-text-widget"><a class="header" href="#the-text-widget">The Text widget</a></h2>
<p>For building up simple widgets there is the <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/struct.Text.html">Text</a> widget which can be used to
provide most of the layout and re-render logic with an easy to use API. Any time the
contents of the widget are modified it will be re-rendered to the bar. On its own this
isn't particularly useful but you can add hooks to set the content in response to changes
in the window manager state (which we'll take a look at in the next section).</p>
<p>Text widgets are left justified by default but this can be switched to right justified if
desired. There is also the ability to specify that the widget is <code>greedy</code> which will cause
it to take up any available left over space once all other widgets have finished laying
out their contents. Personally I use this with the <code>ActiveWindowName</code> widget to take up
the middle of the status bar and act as a sort of active screen indicator .</p>
<h2 id="the-refreshtext-widget"><a class="header" href="#the-refreshtext-widget">The RefreshText widget</a></h2>
<p>If you want to render something that doesn't depend on the internal state of the window
manager (such as the current time, volume, connected wifi network etc) then you can set up
a very minimal widget quickly using <code>RefreshText</code>. All you need is a function that returns
the string to be rendered when it is called and the styling you'd like to use when rendering.
From that you get a widget that will check if it needs to re-render every time the internal
window manager state is refreshed and re-render any time the output of your function changes.</p>
<p>The <code>sys</code> module has a number of simple widgets of this nature that you can use as a reference
to get you started. For example, this is all you need to display the current date and time:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use penrose::util::spawn_for_output_with_args;
use penrose_ui::bar::widgets::{RefreshText, TextStyle};

pub fn current_date_and_time(style: &amp;TextStyle) -&gt; RefreshText {
    RefreshText::new(style, || {
        spawn_for_output_with_args(&quot;date&quot;, &amp;[&quot;+%F %R&quot;])
            .unwrap_or_default()
            .trim()
            .to_string()
    })
}
<span class="boring">}</span></code></pre></pre>
<h2 id="built-in-widgets"><a class="header" href="#built-in-widgets">Built in widgets</a></h2>
<h3 id="workspaces"><a class="header" href="#workspaces">Workspaces</a></h3>
<p>The <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/struct.Workspaces.html">Workspaces</a> widget is the most complicated built in widget on offer. It checks the
currently available workspaces and several properties about each one:</p>
<ul>
<li>The tag assigned to the workspace</li>
<li>Whether or not the workspace is focused (and on what screen)</li>
<li>If there are any windows visible on the workspace</li>
</ul>
<p>From that it will generate a workspace listing with highlighting to indicate the current
state of your window manager. Workspaces with windows present are assigned a different
foreground color and focused workspaces are assigned a different background color. The
active workspace is indicated with its own highlight for visibility as well.</p>
<h3 id="rootwindowname"><a class="header" href="#rootwindowname">RootWindowName</a></h3>
<p>The <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/struct.RootWindowName.html">RootWindowName</a> widget is an idea lifted directly from dwm: any time the root window
name is updated it will re-render with its content set to the new name. The <a href="https://man.archlinux.org/man/xsetroot.1.en">xsetroot</a>
tool can be used to set the root window name to whatever string you like and typically
this is used by spawning a shell script that updates the root window name with system
stats on an interval:</p>
<pre><code class="language-sh"># Set the root window name to the current date and time
$ xsetroot -name &quot;$(date '+%F %R')&quot;
</code></pre>
<h3 id="activewindowname"><a class="header" href="#activewindowname">ActiveWindowName</a></h3>
<p>In a similar way, <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/struct.ActiveWindowName.html">ActiveWindowName</a> will display the title of the currently focused
window. Given that there is less control over what the contents of this string will be,
this widget allows you to set a maximum character count after which the title is
truncated to <code>...</code>.</p>
<p>This widget will also only render on the active screen so it works well as a visual
indicator of which screen currently has focus.</p>
<h3 id="currentlayout"><a class="header" href="#currentlayout">CurrentLayout</a></h3>
<p>The <a href="https://sminez.github.io/penrose/rustdoc/penrose_ui/bar/widgets/struct.CurrentLayout.html">CurrentLayout</a> widget simply calls the <code>layout_name</code> method on the active workspace
each time the internal state is refreshed. Each <code>Layout</code> is free to specify whatever name it
choses so if you want to customise the text displayed by this widget you will need to write a
<code>LayoutTransformer</code> that intercepts the inner name and maps it to your preferred string
instead (or write a new widget that bakes that behaviour into the widget itself).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../builtin/actions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../extensions/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../builtin/actions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../extensions/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
